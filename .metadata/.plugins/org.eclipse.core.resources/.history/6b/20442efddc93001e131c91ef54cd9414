<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<link rel="shortcut icon" type="image/x-icon" href="data:image/x-icon;">
	<link rel="stylesheet" href="/resources/css/bootstrap/bootstrap.min.css">
	<script src="/resources/js/jquery/jquery-3.7.1.min.js"></script>
	<title>comment list page</title>
</head>
<body>
	<div class="container">
		<h1>${list }</h1>
		<div class="row">
			<div class="col">
				<button type="button" class="btn btn-secondary" id="logoutBtn">로그아웃</button>
				<button type="button" class="btn btn-info" id="masterMenu">관리자 메뉴</button>
				<button type="button" class="btn btn-danger" id="selDelBtn">선택한 댓글 삭제</button>
			</div>
		</div>
	
		<table class="table">
				<thead>
					<tr>
						<th>선택</th>
						<th>#</th>
						<th>게시글 시퀀스</th>
						<th>댓글 내용</th>
						<th>작성자</th>
						<th>작성일</th>
						<th>삭제</th>
					</tr>
				</thead>
				<tbody>
					<c:choose>
						<c:when test="${list ne null }">
							<c:forEach var="dto" items="${list}" varStatus="status">
								<tr>
									<td><input type="checkbox" name="delList" value=""></td>
									<td>${dto.seq}</td>
									<td>${dto.boardseq > 0 ? dto.boardseq : dto.replyboardseq}</td>
									<td>${dto.content}</td>
									<td>${dto.id}</td>
									<td>${dto.regdate}</td>
									<td><button type="button" class="btn btn-danger" onclick="delcomment()">삭제</button></td>
								</tr>
							</c:forEach>
						</c:when>
						<c:otherwise>
							<tr>
								<td colspan="7">조건에 맞는 댓글이 없습니다.</td>
							</tr>
						</c:otherwise>
					</c:choose>
				</tbody>
			</table>
			<c:if test="${srchInfo ne null}">
			<!-- Pagination -->
			<ul class="pagination">
				<c:if test="${srchInfo.pagination.curRange > 1}">
					<li class="page-item"><a class="page-link" onclick="toPrevPage(${(srchInfo.pagination.curRange-1) * srchInfo.pagination.rangeSize})">Previous</a></li>			
				</c:if>
				<c:forEach var="i" begin="${srchInfo.pagination.startPage}" end="${srchInfo.pagination.endPage}">
					<li class="page-item"><a class="page-link" onclick="toPage(${i})">${i}</a></li>
				</c:forEach>
				<c:if test="${srchInfo.pagination.rangeCnt > srchInfo.pagination.curRange}">
					<li class="page-item"><a class="page-link" onclick="toNextPage(${(srchInfo.pagination.curPage*srchInfo.pagination.rangeSize)+1})">Next</a></li>			
				</c:if>
			</ul>		
		</c:if>
	</div>
</body>
</html>